<div class="calculator-container">
  <div class="history-panel">
    <div class="history-header">
      <h3>History</h3>
      <button class="clear-history" (click)="clearHistory()">Clear</button>
    </div>
    <div #historyEntries class="history-entries">
      <div *ngFor="let entry of history" class="history-entry">
        <div class="expression">{{ entry.expression }}</div>
        <div class="result">= {{ entry.result }}</div>
        <div class="timestamp">{{ entry.timestamp | date:'mediumTime' }}</div>
      </div>
      <div *ngIf="history.length === 0" class="no-history">
        No calculations yet
      </div>
    </div>
  </div>

  <div class="futuristic-calculator-frame">
    <div #displayPanel class="display-panel futuristic-text">{{ displayValue }}</div>

    <div class="keypad-matrix">
      <!-- Row 1 -->
      <button (click)="clear()" class="button function-button">AC</button>
      <button (click)="toggleSign()" class="button operator-button">+/-</button>
      <button (click)="percentage()" class="button operator-button">%</button>
      <button (click)="handleOperator('/')" class="button operator-button">รท</button>

      <!-- Row 2 -->
      <button (click)="appendDigit('7')" class="button digit-button">7</button>
      <button (click)="appendDigit('8')" class="button digit-button">8</button>
      <button (click)="appendDigit('9')" class="button digit-button">9</button>
      <button (click)="handleOperator('*')" class="button operator-button">ร</button>

      <!-- Row 3 -->
      <button (click)="appendDigit('4')" class="button digit-button">4</button>
      <button (click)="appendDigit('5')" class="button digit-button">5</button>
      <button (click)="appendDigit('6')" class="button digit-button">6</button>
      <button (click)="handleOperator('-')" class="button operator-button">-</button>

      <!-- Row 4 -->
      <button (click)="appendDigit('1')" class="button digit-button">1</button>
      <button (click)="appendDigit('2')" class="button digit-button">2</button>
      <button (click)="appendDigit('3')" class="button digit-button">3</button>
      <button (click)="handleOperator('+')" class="button operator-button">+</button>

      <!-- Row 5 -->
      <button (click)="appendDigit('0')" class="button digit-button span-two">0</button>
      <button (click)="appendDigit('.')" class="button digit-button">.</button>
      <button (click)="handleEquals()" class="button equals-button">=</button>
    </div>
  </div>
</div>
